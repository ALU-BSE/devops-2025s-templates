# Use an official Node.js lightweight image.
# 'node:20-slim' is a good balance of size and features.
FROM node:20-slim

# Set the working directory inside the container
WORKDIR /usr/src/app

# Copy package.json AND package-lock.json
# This leverages Docker's build cache. As long as these files
# don't change, Docker will use the cached 'npm install' layer.
COPY package*.json ./

# Install all dependencies (including devDependencies)
RUN npm install

# Copy the rest of your application source code
COPY . .

# Expose the port your app runs on (e.g., 3000)
EXPOSE 3000

# The command to run your application
# 'npm start' is common, which often runs 'node index.js'
CMD ["npm", "start"]
